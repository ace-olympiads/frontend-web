(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[473],{2304:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth",function(){return n(7327)}])},6131:function(e,s,n){"use strict";var t=n(6154),i=n(2321),r=n.n(i);let l=t.Z.create({baseURL:"".concat("https://backend.aceacad.com"),headers:{"Content-Type":"application/json"},httpAgent:new(r()).Agent({keepAlive:!0})});s.Z=l},8726:function(e,s,n){"use strict";var t=n(5893),i=n(6010);s.Z=e=>{let{type:s="button",fullWidth:n,children:r,onClick:l,secondary:a,danger:o,disabled:d}=e;return(0,t.jsx)("button",{onClick:l,type:s,disabled:d,className:(0,i.Z)("\n        flex \n        justify-center \n        rounded-md \n        px-3 \n        py-2 \n        text-sm \n        font-semibold \n        focus-visible:outline \n        focus-visible:outline-2 \n        focus-visible:outline-offset-2 \n        ",d&&"opacity-50 cursor-default",n&&"w-full",a?"text-gray-900":"text-white",o&&"bg-rose-500 hover:bg-rose-600 focus-visible:outline-rose-600",!a&&!o&&"bg-sky-500 hover:bg-sky-600 focus-visible:outline-sky-600"),children:r})}},7327:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return g}});var t=n(5893),i=n(3299),r=n(7294),l=n(3750),a=n(7536),o=n(9332),d=n(6501),c=n(6131),u=n(6010),h=e=>{let{label:s,id:n,register:i,required:r,errors:l,type:a="text",disabled:o}=e;return(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:n,className:" block  text-sm  font-medium  leading-6  text-gray-900 ",children:s}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("input",{id:n,type:a,autoComplete:n,disabled:o,...i(n,{required:r}),className:(0,u.Z)("\n            form-input\n            block \n            w-full \n            rounded-md \n            border-0 \n            py-1.5 \n            text-gray-900 \n            shadow-sm \n            ring-1 \n            ring-inset \n            ring-gray-300 \n            placeholder:text-gray-400 \n            focus:ring-2 \n            focus:ring-inset \n            focus:ring-sky-600 \n            sm:text-sm \n            sm:leading-6",l[n]&&"focus:ring-rose-500",o&&"opacity-50 cursor-default")})})]})},m=n(8726),f=e=>{let{icon:s,onClick:n}=e;return(0,t.jsx)("button",{type:"button",onClick:n,className:" inline-flex w-full  justify-center  rounded-md  bg-white  px-4  py-2  text-gray-500  shadow-sm  ring-1  ring-inset  ring-gray-300  hover:bg-gray-50  focus:outline-offset-0 ",children:(0,t.jsx)(s,{})})},x=()=>{let e=(0,i.useSession)(),s=(0,o.useRouter)(),[n,u]=(0,r.useState)("LOGIN"),[x,g]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(null==e?void 0:e.status)==="authenticated"&&s.push("/")},[null==e?void 0:e.status,s]);let p=(0,r.useCallback)(()=>{"LOGIN"===n?u("REGISTER"):u("LOGIN")},[n]),{register:y,handleSubmit:v,formState:{errors:b}}=(0,a.cI)({defaultValues:{username:"",email:"",password:""}}),j=e=>{g(!0),(0,i.signIn)(e,{redirect:!1}).then(e=>{(null==e?void 0:e.error)&&d.Am.error("Invalid credentials!"),(null==e?void 0:e.ok)&&s.push("/")}).finally(()=>g(!1))};return(0,t.jsx)("div",{style:{height:"80vh",display:"flex",width:"30vw",padding:"90px 0",minWidth:"400px",justifyContent:"center",alignItems:"center"},children:(0,t.jsxs)("div",{style:{width:"100%"},className:"   bg-white   px-4   py-8   shadow   sm:rounded-lg   sm:px-10   ",children:[(0,t.jsxs)("form",{className:"space-y-6",onSubmit:v(e=>{g(!0),"REGISTER"===n&&(console.log("kcuhas dlkfasdfk"),c.Z.post("users/create/",e).then(()=>c.Z.post("users/account/",e)).then(()=>(0,i.signIn)("credentials",{...e,redirect:!1})).then(e=>{(null==e?void 0:e.error)?(console.log(e),d.Am.error("Invalid credentials!")):(null==e?void 0:e.ok)&&!(null==e?void 0:e.error)&&(d.Am.success("Your credentials"),s.push("/"))}).catch(e=>{console.log(e),d.Am.error("The email address is already in use")}).finally(()=>g(!1))),"LOGIN"===n&&(0,i.signIn)("credentials",{...e,redirect:!1}).then(e=>{console.log(e),(null==e?void 0:e.error)?(console.log(e.error),d.Am.error("Invalid credentials!")):(null==e?void 0:e.ok)&&!(null==e?void 0:e.error)&&(d.Am.success("Your credentials"),s.push("/"))}).finally(()=>g(!1))}),children:[(0,t.jsx)(h,{disabled:x,register:y,errors:b,required:!0,id:"email",label:"Email address",type:"email"}),"REGISTER"===n&&(0,t.jsx)(h,{disabled:x,register:y,errors:b,required:!0,id:"username",label:"Name"}),(0,t.jsx)(h,{disabled:x,register:y,errors:b,required:!0,id:"password",label:"Password",type:"password"}),(0,t.jsx)("div",{children:(0,t.jsx)(m.Z,{disabled:x,fullWidth:!0,type:"submit",children:"LOGIN"===n?"Sign in":"Register"})})]}),(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"   absolute    inset-0    flex    items-center   ",children:(0,t.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,t.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,t.jsx)("span",{className:"bg-white px-2 text-gray-500",children:"Or continue with"})})]}),(0,t.jsxs)("div",{className:"mt-6 flex gap-2",children:[(0,t.jsx)(f,{icon:l.k1O,onClick:()=>j("facebook")}),(0,t.jsx)(f,{icon:l.VyK,onClick:()=>j("google")}),(0,t.jsx)(f,{icon:l.Vs6,onClick:()=>j("instagram")})]})]}),(0,t.jsxs)("div",{className:"   flex    gap-2    justify-center    text-sm    mt-6    px-2    text-gray-500   ",children:[(0,t.jsx)("div",{children:"LOGIN"===n?"New to AceOlympiads?":"Already have an account?"}),(0,t.jsx)("div",{onClick:p,className:"underline cursor-pointer",children:"LOGIN"===n?"Create an account":"Login"})]})]})})},g=()=>(0,t.jsx)("div",{style:{display:"flex",height:"90vh",justifyContent:"center"},children:(0,t.jsx)(x,{})})}},function(e){e.O(0,[13,321,648,774,888,179],function(){return e(e.s=2304)}),_N_E=e.O()}]);